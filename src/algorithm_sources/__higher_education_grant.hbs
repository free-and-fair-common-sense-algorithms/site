
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">config</span> InlineBackend.figure_format = &#39;retina&#39;
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;..&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 18.4 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Higher-Education-Grant-Algorithm">Higher Education Grant Algorithm<a class="anchor-link" href="#Higher-Education-Grant-Algorithm">&#182;</a></h1><p>The intent of this algorithm is to...</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="k">import</span> <span class="n">datetime</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="k">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.pipeline</span> <span class="k">import</span> <span class="n">Pipeline</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="k">import</span> <span class="n">OneHotEncoder</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="k">import</span> <span class="n">RandomForestRegressor</span>

<span class="kn">import</span> <span class="nn">model_helpers</span>
<span class="kn">from</span> <span class="nn">sklearn_transformers.preprocessing</span> <span class="k">import</span> <span class="n">FeatureSelector</span>
<span class="kn">from</span> <span class="nn">sklearn_transformers.preprocessing</span> <span class="k">import</span> <span class="n">MultiColumnLabelEncoder</span>
<span class="kn">from</span> <span class="nn">sklearn_transformers.regression</span> <span class="k">import</span> <span class="n">RegressorWithNoise</span>
<span class="kn">import</span> <span class="nn">regressor_report</span>

<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="k">import</span> <span class="n">display</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 671 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Fetch-the-data:">Fetch the data:<a class="anchor-link" href="#Fetch-the-data:">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>explain the data</em></p>
<p>Pell Grant data: <a href="https://trends.collegeboard.org/content/sources-grant-aid-full-time-undergraduates-sector-2011-12">https://trends.collegeboard.org/content/sources-grant-aid-full-time-undergraduates-sector-2011-12</a></p>
<p>Grants per Institution: <a href="https://studentaid.ed.gov/sa/about/data-center/student/title-iv">https://studentaid.ed.gov/sa/about/data-center/student/title-iv</a></p>
<p>Tuition data: <a href="https://catalog.data.gov/dataset/college-scorecard">https://catalog.data.gov/dataset/college-scorecard</a></p>
<p>Sign up for a <a href="https://api.data.gov/signup/">data.gov API key here</a></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[177]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">Data</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 425 µs
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To determine the percent awarded, need to know the maximum Pell grant award amount for each year.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[178]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span><span class="o">.</span><span class="n">download</span><span class="p">(</span>
    <span class="s1">&#39;https://trends.collegeboard.org/sites/default/files/sa-2018-figure-21a.xlsx&#39;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="s1">&#39;max_pell_grant&#39;</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>successfully downloaded [https://trends.collegeboard.org/sites/default/files/sa-2018-figure-21a.xlsx] to [data/max_pell_grant__sa-2018-figure-21a-xlsx__raw_data.xlsx]
time: 109 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Grand disbursements per institution per year (from <a href="https://studentaid.ed.gov/sa/about/data-center/student/title-iv">https://studentaid.ed.gov/sa/about/data-center/student/title-iv</a>). The Q4 data has the complete data for the given year.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[143]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">student_loans_data_urls</span> <span class="o">=</span> <span class="p">[]</span>

<span class="n">base_url</span> <span class="o">=</span> <span class="s1">&#39;https://studentaid.ed.gov/sa/sites/default/files/fsawg/datacenter/library/&#39;</span>
<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1999</span><span class="p">,</span> <span class="mi">2006</span><span class="p">):</span>  
    <span class="n">student_loans_data_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="si">{base_url}</span><span class="s1">AY</span><span class="si">{year}</span><span class="s1">-{str(year + 1)[-2:]}Pell.xls&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">year</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">18</span><span class="p">):</span>
    <span class="n">this_year</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;</span><span class="si">{year}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">next_year</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;{year + 1}&#39;</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">student_loans_data_urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="s1">&#39;</span><span class="si">{base_url}</span><span class="s1">Q4</span><span class="si">{this_year}{next_year}</span><span class="s1">AY.xls&#39;</span><span class="p">)</span>  

<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">student_loans_data_urls</span><span class="p">:</span>
    <span class="n">data</span><span class="o">.</span><span class="n">download</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;grant_amount&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 362 µs
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Need to get information about how much tutition is for each institution</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[182]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://api.data.gov/ed/collegescorecard/v1/schools&#39;</span>
<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;api_key&#39;</span><span class="p">:</span> <span class="s1">&#39;&lt;DATA.GOV API KEY&gt;&#39;</span><span class="p">,</span> <span class="c1"># Get API key from here: https://api.data.gov/signup/</span>
    <span class="s1">&#39;_per_page&#39;</span><span class="p">:</span> <span class="mi">100</span>
<span class="p">}</span>

<span class="n">ids</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">grants_df</span><span class="p">[</span><span class="s1">&#39;ope id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="n">fp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="mi">8</span><span class="p">]</span> <span class="k">for</span> <span class="n">fp</span> <span class="ow">in</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;data/*.json&#39;</span><span class="p">)}</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ids</span><span class="p">))</span>

<span class="k">for</span> <span class="n">ope_id</span> <span class="ow">in</span> <span class="n">ids</span><span class="p">:</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;ope8_id&#39;</span><span class="p">:</span> <span class="n">ope_id</span><span class="p">}</span>
    <span class="n">data</span><span class="o">.</span><span class="n">fetch</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">params</span><span class="p">)</span>       
    <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">create_local_filename</span><span class="p">(</span><span class="n">ope_id</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s1">&#39;.json&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;tuition_data&#39;</span><span class="p">)</span>
        <span class="n">data</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        
    <span class="k">if</span> <span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-RateLimit-Remaining&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;stopping, over rate limit&#39;</span><span class="p">)</span>
        <span class="k">break</span>

    <span class="nb">print</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">[</span><span class="s1">&#39;X-RateLimit-Remaining&#39;</span><span class="p">]))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 685 µs
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Need to know the tuition for each of the institutions in the <code>grant_amounts</code> dataset, so each individual excel sheet needs to be loaded into a dataframe, so we can access that field</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Load-and-combine-the-datasets:">Load and combine the datasets:<a class="anchor-link" href="#Load-and-combine-the-datasets:">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The grants data are in semi-regularly formatted excel spreadsheets, the code below extracts the relevant data from the sheets.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[108]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">grant_dfs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">fp</span> <span class="ow">in</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;data/grants/Q4*.xls&#39;</span><span class="p">)):</span>
    <span class="n">sheetname</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">sheetname</span>
        <span class="k">for</span> <span class="n">sheetname</span> <span class="ow">in</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="k">if</span> <span class="s1">&#39; YTD&#39;</span> <span class="ow">in</span> <span class="n">sheetname</span> <span class="ow">or</span> <span class="n">sheetname</span> <span class="o">==</span> <span class="s1">&#39;Award Year Summary&#39;</span>
    <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">header_col</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">i</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">r</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="n">sheetname</span><span class="p">)</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">r</span> <span class="o">==</span> <span class="s1">&#39;OPE ID&#39;</span>
    <span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">temp_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span>
        <span class="n">fp</span><span class="p">,</span>
        <span class="n">sheet_name</span><span class="o">=</span><span class="n">sheetname</span><span class="p">,</span>
        <span class="n">header</span><span class="o">=</span><span class="p">[</span><span class="n">header_col</span><span class="p">,</span> <span class="n">header_col</span><span class="o">+</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">dtype</span><span class="o">=</span><span class="s1">&#39;object&#39;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">col_index</span> <span class="o">=</span> <span class="p">[</span><span class="kc">True</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">get_level_values</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="k">if</span> <span class="n">col</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Unnamed&#39;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">col</span> <span class="o">==</span> <span class="s1">&#39;FEDERAL PELL GRANT PROGRAM&#39;</span><span class="p">]</span>
    <span class="n">temp_df</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="n">col_index</span><span class="p">]</span>
    <span class="n">temp_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">droplevel</span><span class="p">()</span>
    <span class="n">temp_df</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
    <span class="n">temp_df</span> <span class="o">=</span> <span class="n">temp_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;sum of recipients&#39;</span><span class="p">:</span> <span class="s1">&#39;pell grant ytd recipients&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ytd recipients&#39;</span><span class="p">:</span> <span class="s1">&#39;pell grant ytd recipients&#39;</span><span class="p">,</span>
        <span class="s1">&#39;sum of disbursements&#39;</span><span class="p">:</span>  <span class="s1">&#39;pell grant ytd disbursements&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ytd disbursements&#39;</span><span class="p">:</span> <span class="s1">&#39;pell grant ytd disbursements&#39;</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">fp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
    <span class="n">temp_df</span><span class="p">[</span><span class="s1">&#39;spreadsheet&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">label</span>
    <span class="n">temp_df</span><span class="p">[</span><span class="s1">&#39;academic_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="s1">&#39;20</span><span class="si">{label[2:4]}</span><span class="s1">&#39;</span>
    <span class="n">temp_df</span><span class="p">[</span><span class="s1">&#39;ope id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp_df</span><span class="p">[</span><span class="s1">&#39;ope id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="mi">8</span><span class="p">))</span>
    <span class="n">grant_dfs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp_df</span><span class="p">)</span>

<span class="n">grants_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">grant_dfs</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">grants_df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">grants_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(65518, 9)
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[108]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ope id</th>
      <th>school</th>
      <th>state</th>
      <th>zip code</th>
      <th>school type</th>
      <th>pell grant ytd recipients</th>
      <th>pell grant ytd disbursements</th>
      <th>spreadsheet</th>
      <th>academic_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>703</th>
      <td>00208900</td>
      <td>PRINCE GEORGE'S COMMUNITY COLLEGE</td>
      <td>MD</td>
      <td>207742199</td>
      <td>Public</td>
      <td>6852</td>
      <td>2.097e+07</td>
      <td>Q41314AY</td>
      <td>2013</td>
    </tr>
    <tr>
      <th>1671</th>
      <td>01281300</td>
      <td>JOHN WOOD COMMUNITY COLLEGE</td>
      <td>IL</td>
      <td>623050401</td>
      <td>Public</td>
      <td>1608</td>
      <td>5.08979e+06</td>
      <td>Q41011AY</td>
      <td>2010</td>
    </tr>
    <tr>
      <th>1</th>
      <td>00100300</td>
      <td>FAULKNER UNIVERSITY</td>
      <td>AL</td>
      <td>361093398</td>
      <td>PRIVATE-NONPROFIT</td>
      <td>1850</td>
      <td>5769573</td>
      <td>Q40809AY</td>
      <td>2008</td>
    </tr>
    <tr>
      <th>2435</th>
      <td>00798500</td>
      <td>SOUTH PIEDMONT COMMUNITY COLLEGE</td>
      <td>NC</td>
      <td>281359703</td>
      <td>Public</td>
      <td>1174</td>
      <td>3.2643e+06</td>
      <td>Q41415AY</td>
      <td>2014</td>
    </tr>
    <tr>
      <th>1153</th>
      <td>04158300</td>
      <td>FLAGLER TECHNICAL INSTITUTE</td>
      <td>FL</td>
      <td>321374714</td>
      <td>PUBLIC</td>
      <td>97</td>
      <td>292272</td>
      <td>Q41213AY</td>
      <td>2012</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 24.1 s
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[109]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">parse_pell_grant_data_start_year</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">s</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">x</span><span class="p">[:</span><span class="mi">2</span><span class="p">])</span>
    <span class="k">if</span> <span class="n">s</span> <span class="o">&gt;=</span> <span class="mi">77</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="mi">1900</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="mi">2000</span> <span class="o">+</span> <span class="n">s</span><span class="p">)</span>


<span class="n">pell_grant_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span>
    <span class="s1">&#39;data/grants/sa-2018-figure-21a.xlsx&#39;</span><span class="p">,</span>
    <span class="n">header</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">usecols</span><span class="o">=</span><span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">)],</span>
    <span class="n">nrows</span><span class="o">=</span><span class="mi">41</span>
<span class="p">)</span>
<span class="n">pell_grant_data</span><span class="p">[</span><span class="s1">&#39;start_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pell_grant_data</span><span class="p">[</span><span class="s1">&#39;Academic Year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">parse_pell_grant_data_start_year</span><span class="p">)</span>
<span class="n">pell_grant_data</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">pell_grant_data</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">pell_grant_data</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">pell_grant_data</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(41, 4)
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[109]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>academic_year</th>
      <th>maximum_pell_grant</th>
      <th>average_pell_grant_per_recipient</th>
      <th>start_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>5</th>
      <td>82-83</td>
      <td>4520</td>
      <td>2410</td>
      <td>1982</td>
    </tr>
    <tr>
      <th>39</th>
      <td>16-17</td>
      <td>5920</td>
      <td>3800</td>
      <td>2016</td>
    </tr>
    <tr>
      <th>31</th>
      <td>08-09</td>
      <td>5260</td>
      <td>3310</td>
      <td>2008</td>
    </tr>
    <tr>
      <th>14</th>
      <td>91-92</td>
      <td>4310</td>
      <td>2750</td>
      <td>1991</td>
    </tr>
    <tr>
      <th>13</th>
      <td>90-91</td>
      <td>4320</td>
      <td>2720</td>
      <td>1990</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 40.9 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">filepaths</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;data/grants/*.json&#39;</span><span class="p">)</span>
<span class="n">school_data</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">fp</span> <span class="ow">in</span> <span class="n">filepaths</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fp</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">infile</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">infile</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">d</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">continue</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">d</span><span class="p">[</span><span class="s1">&#39;results&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s1">&#39;ope8_id&#39;</span><span class="p">:</span> <span class="n">fp</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][:</span><span class="mi">8</span><span class="p">],</span>
                <span class="s1">&#39;year&#39;</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="n">k</span><span class="p">),</span>
                <span class="s1">&#39;out_of_state_tuition&#39;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s1">&#39;cost&#39;</span><span class="p">][</span><span class="s1">&#39;tuition&#39;</span><span class="p">][</span><span class="s1">&#39;out_of_state&#39;</span><span class="p">],</span>
                <span class="s1">&#39;in_state_tuition&#39;</span><span class="p">:</span> <span class="n">v</span><span class="p">[</span><span class="s1">&#39;cost&#39;</span><span class="p">][</span><span class="s1">&#39;tuition&#39;</span><span class="p">][</span><span class="s1">&#39;in_state&#39;</span><span class="p">],</span>
            <span class="p">}</span>
            <span class="n">school_data</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>

<span class="n">tuition_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">school_data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ope8_id&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="s1">&#39;out_of_state_tuition&#39;</span><span class="p">,</span> <span class="s1">&#39;in_state_tuition&#39;</span><span class="p">])</span>
<span class="n">tuition_df</span> <span class="o">=</span> <span class="n">tuition_df</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ope8_id&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">tuition_df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tuition_df</span><span class="o">.</span><span class="n">ope8_id</span><span class="o">.</span><span class="n">unique</span><span class="p">()))</span>
<span class="n">tuition_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(91819, 4)
4993
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[23]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ope8_id</th>
      <th>year</th>
      <th>out_of_state_tuition</th>
      <th>in_state_tuition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>84250</th>
      <td>03469300</td>
      <td>2005</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3098</th>
      <td>00121500</td>
      <td>2016</td>
      <td>31590.0</td>
      <td>31590.0</td>
    </tr>
    <tr>
      <th>48090</th>
      <td>00765800</td>
      <td>2001</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>21526</th>
      <td>00262400</td>
      <td>2012</td>
      <td>6120.0</td>
      <td>3312.0</td>
    </tr>
    <tr>
      <th>33078</th>
      <td>00353700</td>
      <td>2009</td>
      <td>20290.0</td>
      <td>20290.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 1min 22s
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[112]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">grants_df</span> <span class="o">=</span> <span class="n">grants_df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">pell_grant_data</span><span class="p">[[</span><span class="s1">&#39;start_year&#39;</span><span class="p">,</span> <span class="s1">&#39;maximum_pell_grant&#39;</span><span class="p">]],</span>
    <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;academic_year&#39;</span><span class="p">],</span>
    <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;start_year&#39;</span><span class="p">],</span>
<span class="p">)</span>
<span class="n">grants_df</span><span class="p">[</span><span class="s1">&#39;academic_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">grants_df</span><span class="p">[</span><span class="s1">&#39;academic_year&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s1">&#39;int64&#39;</span><span class="p">)</span>

<span class="n">_df</span> <span class="o">=</span> <span class="n">grants_df</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span>
    <span class="n">tuition_df</span><span class="p">,</span> 
    <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span>
    <span class="n">left_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ope id&#39;</span><span class="p">,</span> <span class="s1">&#39;academic_year&#39;</span><span class="p">],</span>
    <span class="n">right_on</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ope8_id&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">],</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">_df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">_df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(65518, 15)
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[112]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>ope id</th>
      <th>school</th>
      <th>state</th>
      <th>zip code</th>
      <th>school type</th>
      <th>pell grant ytd recipients</th>
      <th>pell grant ytd disbursements</th>
      <th>spreadsheet</th>
      <th>academic_year</th>
      <th>start_year</th>
      <th>maximum_pell_grant</th>
      <th>ope8_id</th>
      <th>year</th>
      <th>out_of_state_tuition</th>
      <th>in_state_tuition</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>9865</th>
      <td>02572000</td>
      <td>COMPUTER CAREER CENTER</td>
      <td>TX</td>
      <td>799252021</td>
      <td>PROPRIETARY</td>
      <td>622</td>
      <td>1656527</td>
      <td>Q40708AY</td>
      <td>2007</td>
      <td>2007</td>
      <td>5060</td>
      <td>02572000</td>
      <td>2007.0</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>41517</th>
      <td>01092300</td>
      <td>UNION INSTITUTE &amp; UNIVERSITY</td>
      <td>OH</td>
      <td>452061925</td>
      <td>Private-Nonprofit</td>
      <td>710</td>
      <td>1904612</td>
      <td>Q41314AY</td>
      <td>2013</td>
      <td>2013</td>
      <td>5920</td>
      <td>01092300</td>
      <td>2013.0</td>
      <td>11904.0</td>
      <td>11904.0</td>
    </tr>
    <tr>
      <th>467</th>
      <td>00171700</td>
      <td>MACMURRAY COLLEGE</td>
      <td>IL</td>
      <td>626502590</td>
      <td>PRIVATE-NONPROFIT</td>
      <td>334</td>
      <td>915067</td>
      <td>Q40607AY</td>
      <td>2006</td>
      <td>2006</td>
      <td>4870</td>
      <td>00171700</td>
      <td>2006.0</td>
      <td>15830.0</td>
      <td>15830.0</td>
    </tr>
    <tr>
      <th>10374</th>
      <td>03197300</td>
      <td>INSTITUTE FOR HEALTH EDUCATION (THE)</td>
      <td>NJ</td>
      <td>73062929</td>
      <td>PROPRIETARY</td>
      <td>55</td>
      <td>143030</td>
      <td>Q40708AY</td>
      <td>2007</td>
      <td>2007</td>
      <td>5060</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>34356</th>
      <td>03875300</td>
      <td>MCI INSTITUTE OF TECHNOLOGY</td>
      <td>FL</td>
      <td>334094937</td>
      <td>PROPRIETARY</td>
      <td>286</td>
      <td>900525</td>
      <td>Q41213AY</td>
      <td>2012</td>
      <td>2012</td>
      <td>5930</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 135 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Preprocessing:">Preprocessing:<a class="anchor-link" href="#Preprocessing:">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[113]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">_df</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;school type&#39;</span><span class="p">:</span> <span class="s1">&#39;school_type&#39;</span><span class="p">})</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ope8_id&#39;</span><span class="p">,</span> <span class="s1">&#39;year&#39;</span><span class="p">])</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">_df</span><span class="p">[</span><span class="o">~</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;pell grant ytd recipients&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="s1">&#39;-&#39;</span><span class="p">])]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 52.9 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Describe average amounts</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[114]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">calculate_average_amount</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;pell grant ytd recipients&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;pell grant ytd disbursements&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;pell grant ytd recipients&#39;</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="mf">0.0</span>

<span class="n">_df</span><span class="p">[</span><span class="s1">&#39;avg_amount&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">calculate_average_amount</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 2.07 s
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Describe region conversion</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[115]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">state_regions</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;northeast&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;CT&#39;</span><span class="p">,</span> <span class="s1">&#39;ME&#39;</span><span class="p">,</span> <span class="s1">&#39;MA&#39;</span><span class="p">,</span> <span class="s1">&#39;NH&#39;</span><span class="p">,</span> <span class="s1">&#39;RI&#39;</span><span class="p">,</span> <span class="s1">&#39;VT&#39;</span><span class="p">,</span> <span class="s1">&#39;NY&#39;</span><span class="p">,</span> <span class="s1">&#39;NJ&#39;</span> <span class="p">,</span> <span class="s1">&#39;PA&#39;</span><span class="p">],</span>
    <span class="s1">&#39;midwest&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;IL&#39;</span><span class="p">,</span> <span class="s1">&#39;IN&#39;</span><span class="p">,</span> <span class="s1">&#39;MI&#39;</span><span class="p">,</span> <span class="s1">&#39;OH&#39;</span><span class="p">,</span> <span class="s1">&#39;WI&#39;</span><span class="p">,</span> <span class="s1">&#39;IA&#39;</span><span class="p">,</span> <span class="s1">&#39;KS&#39;</span><span class="p">,</span> <span class="s1">&#39;MN&#39;</span><span class="p">,</span> <span class="s1">&#39;MO&#39;</span><span class="p">,</span> <span class="s1">&#39;NE&#39;</span><span class="p">,</span> <span class="s1">&#39;ND&#39;</span><span class="p">,</span> <span class="s1">&#39;SD&#39;</span><span class="p">],</span>
    <span class="s1">&#39;south&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;DE&#39;</span><span class="p">,</span> <span class="s1">&#39;FL&#39;</span><span class="p">,</span> <span class="s1">&#39;GA&#39;</span><span class="p">,</span> <span class="s1">&#39;MD&#39;</span><span class="p">,</span> <span class="s1">&#39;NC&#39;</span><span class="p">,</span> <span class="s1">&#39;SC&#39;</span><span class="p">,</span> <span class="s1">&#39;VA&#39;</span><span class="p">,</span> <span class="s1">&#39;DC&#39;</span><span class="p">,</span> <span class="s1">&#39;WV&#39;</span><span class="p">,</span> <span class="s1">&#39;AL&#39;</span><span class="p">,</span> <span class="s1">&#39;KY&#39;</span><span class="p">,</span> <span class="s1">&#39;MS&#39;</span><span class="p">,</span> <span class="s1">&#39;TN&#39;</span><span class="p">,</span> <span class="s1">&#39;AR&#39;</span><span class="p">,</span> <span class="s1">&#39;LA&#39;</span><span class="p">,</span> <span class="s1">&#39;OK&#39;</span><span class="p">,</span> <span class="s1">&#39;TX&#39;</span><span class="p">,</span> <span class="s1">&#39;PR&#39;</span><span class="p">,</span> <span class="s1">&#39;AS&#39;</span><span class="p">,</span> <span class="s1">&#39;VI&#39;</span><span class="p">],</span>
    <span class="s1">&#39;west&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;AZ&#39;</span><span class="p">,</span> <span class="s1">&#39;CO&#39;</span><span class="p">,</span> <span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="s1">&#39;MT&#39;</span><span class="p">,</span> <span class="s1">&#39;NV&#39;</span><span class="p">,</span> <span class="s1">&#39;NM&#39;</span><span class="p">,</span> <span class="s1">&#39;UT&#39;</span><span class="p">,</span> <span class="s1">&#39;WY&#39;</span><span class="p">,</span> <span class="s1">&#39;AK&#39;</span><span class="p">,</span> <span class="s1">&#39;CA&#39;</span><span class="p">,</span> <span class="s1">&#39;HI&#39;</span><span class="p">,</span> <span class="s1">&#39;OR&#39;</span><span class="p">,</span> <span class="s1">&#39;WA&#39;</span><span class="p">,</span> <span class="s1">&#39;GU&#39;</span><span class="p">,</span> <span class="s1">&#39;FM&#39;</span><span class="p">,</span> <span class="s1">&#39;MH&#39;</span><span class="p">,</span> <span class="s1">&#39;MP&#39;</span><span class="p">,</span> <span class="s1">&#39;PW&#39;</span><span class="p">],</span>
<span class="p">}</span>

<span class="k">def</span> <span class="nf">convert_region</span><span class="p">(</span><span class="n">state_abbr</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">region</span><span class="p">,</span> <span class="n">states</span> <span class="ow">in</span> <span class="n">state_regions</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">state_abbr</span> <span class="ow">in</span> <span class="n">states</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">region</span>
    <span class="k">return</span>


<span class="n">_df</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;state&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">convert_region</span><span class="p">)</span>
<span class="n">_df</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;region&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 118 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Describe conversions</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[117]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">convert_to_numeric</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span>

<span class="n">_df</span><span class="p">[</span><span class="s1">&#39;pell grant ytd disbursements&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;pell grant ytd disbursements&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">convert_to_numeric</span><span class="p">)</span>
<span class="n">_df</span><span class="p">[</span><span class="s1">&#39;pell grant ytd recipients&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;pell grant ytd recipients&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">convert_to_numeric</span><span class="p">)</span>
<span class="n">_df</span><span class="p">[</span><span class="s1">&#39;school_type&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;school_type&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 497 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>Describe grant coverage percent calcs</em></p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[118]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_1</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()[</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;maximum_pell_grant&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;out_of_state_tuition&#39;</span><span class="p">]]</span>
<span class="n">df_1</span><span class="p">[</span><span class="s1">&#39;in_state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">df_1</span><span class="p">[</span><span class="s1">&#39;grant_coverage_percent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_1</span><span class="p">[</span><span class="s1">&#39;avg_amount&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df_1</span><span class="p">[</span><span class="s1">&#39;out_of_state_tuition&#39;</span><span class="p">]</span>

<span class="n">df_2</span> <span class="o">=</span> <span class="n">_df</span><span class="o">.</span><span class="n">copy</span><span class="p">()[</span><span class="n">_df</span><span class="p">[</span><span class="s1">&#39;maximum_pell_grant&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">_df</span><span class="p">[</span><span class="s1">&#39;in_state_tuition&#39;</span><span class="p">]]</span>
<span class="n">df_2</span><span class="p">[</span><span class="s1">&#39;in_state&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">df_2</span><span class="p">[</span><span class="s1">&#39;grant_coverage_percent&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_2</span><span class="p">[</span><span class="s1">&#39;avg_amount&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="n">df_2</span><span class="p">[</span><span class="s1">&#39;in_state_tuition&#39;</span><span class="p">]</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span>
    <span class="n">df_1</span><span class="p">[[</span><span class="s1">&#39;school_type&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;in_state&#39;</span><span class="p">,</span> <span class="s1">&#39;grant_coverage_percent&#39;</span><span class="p">]],</span>
    <span class="n">df_2</span><span class="p">[[</span><span class="s1">&#39;school_type&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;in_state&#39;</span><span class="p">,</span> <span class="s1">&#39;grant_coverage_percent&#39;</span><span class="p">]]</span>
<span class="p">])</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;grant_coverage_percent&#39;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">replace</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">,</span> <span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">nan</span><span class="p">)</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;grant_coverage_percent&#39;</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>(7008, 4)
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt output_prompt">Out[118]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>school_type</th>
      <th>region</th>
      <th>in_state</th>
      <th>grant_coverage_percent</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>61493</th>
      <td>public</td>
      <td>south</td>
      <td>True</td>
      <td>1.311016</td>
    </tr>
    <tr>
      <th>19889</th>
      <td>public</td>
      <td>west</td>
      <td>True</td>
      <td>1.443183</td>
    </tr>
    <tr>
      <th>41698</th>
      <td>public</td>
      <td>midwest</td>
      <td>True</td>
      <td>1.113937</td>
    </tr>
    <tr>
      <th>46053</th>
      <td>public</td>
      <td>south</td>
      <td>True</td>
      <td>1.904860</td>
    </tr>
    <tr>
      <th>21935</th>
      <td>public</td>
      <td>west</td>
      <td>False</td>
      <td>1.019806</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 469 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model:">Model:<a class="anchor-link" href="#Model:">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">feature_columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;school_type&#39;</span><span class="p">,</span> <span class="s1">&#39;region&#39;</span><span class="p">,</span> <span class="s1">&#39;in_state&#39;</span><span class="p">]</span>
<span class="n">target_column</span> <span class="o">=</span> <span class="s1">&#39;grant_coverage_percent&#39;</span>

<span class="n">x</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()[</span><span class="n">feature_columns</span><span class="p">]</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">copy</span><span class="p">()[</span><span class="n">target_column</span><span class="p">]</span>

<span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1337</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">x_train</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">x_test</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>5606 1402
time: 22.7 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([</span>
    <span class="p">(</span><span class="s1">&#39;feature_selector&#39;</span><span class="p">,</span> <span class="n">FeatureSelector</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">feature_columns</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;feature_column_encoder&#39;</span><span class="p">,</span> <span class="n">MultiColumnLabelEncoder</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="n">feature_columns</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;encoder&#39;</span><span class="p">,</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">handle_unknown</span><span class="o">=</span><span class="s1">&#39;ignore&#39;</span><span class="p">,</span> <span class="n">sparse</span><span class="o">=</span><span class="kc">False</span><span class="p">)),</span>
    <span class="p">(</span><span class="s1">&#39;estimator&#39;</span><span class="p">,</span> <span class="n">RegressorWithNoise</span><span class="p">(</span>
        <span class="n">RandomForestRegressor</span><span class="p">(</span>
            <span class="n">n_estimators</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
            <span class="n">max_features</span><span class="o">=</span><span class="s1">&#39;sqrt&#39;</span><span class="p">,</span>
            <span class="n">max_depth</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
            <span class="n">random_state</span><span class="o">=</span><span class="mi">1337</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="p">))</span>
<span class="p">])</span>
<span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[6]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>Pipeline(memory=None,
         steps=[(&#39;feature_selector&#39;,
                 FeatureSelector(columns=[&#39;school_type&#39;, &#39;region&#39;,
                                          &#39;in_state&#39;])),
                (&#39;feature_column_encoder&#39;,
                 &lt;sklearn_transformers.preprocessing.MultiColumnLabelEncoder object at 0x12c193978&gt;),
                (&#39;encoder&#39;,
                 OneHotEncoder(categorical_features=None, categories=None,
                               drop=None, dtype=&lt;class &#39;numpy.float64&#39;&gt;,
                               handle_unknown=&#39;ignore&#39;, n_v...
                 RegressorWithNoise(regressor=RandomForestRegressor(bootstrap=True,
                                                                    criterion=&#39;mse&#39;,
                                                                    max_depth=30,
                                                                    max_features=&#39;sqrt&#39;,
                                                                    max_leaf_nodes=None,
                                                                    min_impurity_decrease=0.0,
                                                                    min_impurity_split=None,
                                                                    min_samples_leaf=1,
                                                                    min_samples_split=2,
                                                                    min_weight_fraction_leaf=0.0,
                                                                    n_estimators=1000,
                                                                    n_jobs=None,
                                                                    oob_score=False,
                                                                    random_state=1337,
                                                                    verbose=0,
                                                                    warm_start=False)))],
         verbose=False)</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 1.44 s
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">regressor_report</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">encoder_step_label</span><span class="o">=</span><span class="s1">&#39;feature_column_encoder&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">x_test</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>Accuracy:                     66.55132
MSE                           0.667414
RMSE                          0.816954
RMSLE                         0.246431
MAE                           0.570536
R2                            0.287231
Adj R2                        0.285806
Median                        1.527459
Avg absolute error (degrees)  0.570536

----------------------------------------
Feature Importances:
region=west                   0.535442
region=south                  0.235579
region=midwest                0.071043
in_state=False                0.048760
in_state=True                 0.048173
school_type=public            0.025132
school_type=private-nonprofit 0.022354
region=northeast              0.013376
school_type=proprietary       0.000141
</pre>
</div>
</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
width=370
height=270
>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>




<div class="output_text output_subarea ">
<pre>array([1.52984709, 1.4568361 , 1.52984709, 1.45335333, 1.4568361 ])</pre>
</div>

</div>

<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 791 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Save-Algorithm:">Save Algorithm:<a class="anchor-link" href="#Save-Algorithm:">&#182;</a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[216]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">algorithm_info</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Higher Education Grant Algorithm&#39;</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;notebook&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Higher Education Grant Algorithm.ipynb&#39;</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;training_data&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Sources of Grant Aid for Full-Time Undergraduates by Sector, 2011-12&#39;</span><span class="p">:</span> <span class="s1">&#39;https://trends.collegeboard.org/content/sources-grant-aid-full-time-undergraduates-sector-2011-12&#39;</span><span class="p">,</span>
    <span class="s1">&#39;Federal Student Aid: Title IV Program Volume Reports&#39;</span><span class="p">:</span> <span class="s1">&#39;https://studentaid.ed.gov/sa/about/data-center/student/title-iv&#39;</span><span class="p">,</span>
    <span class="s1">&#39;College Scorecard&#39;</span><span class="p">:</span> <span class="s1">&#39;https://catalog.data.gov/dataset/college-scorecard&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;description&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;The Higher Education Grant Algorithm helps calculate the amount that should be awarded to applicants of Federal grant funding.&#39;</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;form_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Enter school information&#39;</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;form&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">model_helpers</span><span class="o">.</span><span class="n">get_form_data_from_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s1">&#39;feature_column_encoder&#39;</span><span class="p">)</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;form_submit&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Calculate Grant Amount&#39;</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;modal_label&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Recommended Grant Amount Percent&#39;</span>
<span class="n">algorithm_info</span><span class="p">[</span><span class="s1">&#39;last_updated&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%B </span><span class="si">%d</span><span class="s1">, %Y&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>time: 24.1 ms
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">model_helpers</span><span class="o">.</span><span class="n">save_info_yml</span><span class="p">(</span><span class="n">algorithm_info</span><span class="p">,</span> <span class="s1">&#39;higher_education_grant&#39;</span><span class="p">)</span>
<span class="n">model_helpers</span><span class="o">.</span><span class="n">save_model</span><span class="p">(</span><span class="n">model</span><span class="p">,</span> <span class="s1">&#39;higher_education_grant&#39;</span><span class="p">)</span>
<span class="n">model_helpers</span><span class="o">.</span><span class="n">upload_model_to_s3</span><span class="p">(</span><span class="s1">&#39;higher_education_grant&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>model [higher_education_grant.model] saved.
model [higher_education_grant.model] uploaded to s3.
time: 1.35 s
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[&nbsp;]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span> 
</pre></div>

    </div>
</div>
</div>

</div>
 

